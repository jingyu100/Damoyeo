<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="layout/basic">
<head>
    <meta charset="UTF-8">
    <title>상세 페이지</title>
</head>
<body>
<!--    <div class="page_title">-->
<!--        <img th:src="@{${post.photo}}">-->
<!--    </div>-->
    <div class="content">
        <table>
            <colgroup>
                <col style="width:10%;" /><col style="width:23%;" /><col style="width:10%;" /><col style="width:23%;" />
            </colgroup>
            <tbody>
                <tr>
                    <th scope="row">제목</th>
                    <td th:text="${post.title}"></td>
                </tr>
                <tr>
                    <th scope="row">내용</th>
                    <td th:text="${post.content}"></td>
                </tr>
                <tr>
                    <th scope="row">상세주소</th>
                    <td th:text="${post.detailAddress}"></td>
                </tr>
                <tr>
                    <th scope="row">분야</th>
                    <td th:text="${post.tag}"></td>
                </tr>
                <tr>
                    <th scope="row">참가자 수</th>
                    <td th:text="${post.nowParticipants}"></td>/<td th:text="${post.maxParticipants}"></td>
                </tr>
                <tr>
                    <th scope="row">조회 수</th>
                    <td th:text="${post.viewCount}"></td>
                </tr>
                <tr>
                    <th scope="row">좋아요</th>
                    <td th:text="${post.likeCount}"></td>
                </tr>
                <tr>
                    <th scope="row">상태</th>
                    <td th:text="${post.status}"></td>
                </tr>
            </tbody>
        </table>
        <div id="map" style="width:500px;height:400px;"></div>

        <!-- Thymeleaf를 통해 Kakao Maps API 키를 script 태그의 src에 직접 바인딩 -->
        <script th:src="@{'//dapi.kakao.com/v2/maps/sdk.js?appkey=' + ${apiKey} + '&libraries=services'}"></script>

        <script>
            var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                mapOption = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                    level: 3 // 지도의 확대 레벨
                };

            // 지도를 생성합니다
            var map = new kakao.maps.Map(mapContainer, mapOption);

            // 주소-좌표 변환 객체를 생성합니다
            var geocoder = new kakao.maps.services.Geocoder();

            // 주소로 좌표를 검색합니다
            geocoder.addressSearch('대구광역시 북구 복현로 35', function(result, status) {

                // 정상적으로 검색이 완료됐으면
                if (status === kakao.maps.services.Status.OK) {

                    var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                    // 결과값으로 받은 위치를 마커로 표시합니다
                    var marker = new kakao.maps.Marker({
                        map: map,
                        position: coords
                    });

                    // 인포윈도우로 장소에 대한 설명을 표시합니다
                    var infowindow = new kakao.maps.InfoWindow({
                        content: '<div style="width:150px;text-align:center;padding:6px 0;">우리회사</div>'
                    });
                    infowindow.open(map, marker);

                    // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                    map.setCenter(coords);
                }
            });

        </script>

        <div class="btn_set">
            <a th:href="@{/post/main}" class="post_mainpage">메인페이지</a>
        </div>
    </div>
</body>
</html>
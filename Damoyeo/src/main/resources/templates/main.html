<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/navfooter.css">
    <title>메인 화면</title>
    <!-- header 부분 시작-->
    <style>

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


        .post-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            margin-left: 10%;
            margin-right: 10%;
        }

        .post {
            width: 30%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
        }

        .post-detail {
            text-decoration: none;
        }

        .post-title {
            color: black;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .post-content {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }

        .post-info {
            font-size: 0.8em;
            color: #888;
        }

        .post img {
            width: 100%; /* 너비를 100%로 설정하여 게시물 폭에 맞추기 */
            height: auto; /* 높이는 자동으로 조정 */
            border-radius: 5px; /* 모서리를 부드럽게 처리 */
            margin-bottom: 10px; /* 이미지와 게시물 내용 사이에 여백 추가 */
        }

        .page-btn {
            position: fixed;
            bottom: 20px; /* 화면 하단에서 20px 위 */
            left: 50%; /* 화면 왼쪽에서 50% */
            transform: translateX(-50%); /* 가로축을 기준으로 중앙 정렬 */
            background-color: white; /* 배경색 추가 (선택사항) */
            padding: 10px; /* 여백 추가 */
            border-radius: 8px; /* 둥근 모서리 (선택사항) */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* 그림자 효과 (선택사항) */
        }

        .page-btn a {
            margin: 0 10px;
            font-size: 1.2em;
            text-decoration: none;
            color: #333; /* 링크 색상 */
        }

        .page-btn a:hover {
            color: #007bff; /* 호버 시 링크 색상 변경 */
        }

        .page-btn span {
            margin: 0 10px;
            font-size: 1.2em;
            color: #333; /* 페이지 번호 색상 */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }


        @font-face {
            font-family: 'Pretendard-Regular';
            src: url('https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff') format('woff');
            font-weight: 400;
            font-style: normal;
        }


        body {
            font-family:'Pretendard-Regular', 'sans-serif'
        }

        header {
            width: 100%;
            background-color: white;
        }

        .header-banner-wrap {
            background-color: #FFF1AA;
            width: 100%;
            height: 500px;
            overflow: hidden;
        }

        .header-banner {
            padding: 30px 0;
            position: relative;
            width: 1200px;
            height: 100%;
            margin: 0 auto;
            transition: background-color 0.5s ease;
        }

        .header-banner h1 {
            margin-left: 25%;
            letter-spacing: -0.32px;
            color: #FFF;
            font-family: Roboto;
            font-style: normal;
            font-weight: 700;
            line-height: 51px;
        }

        .header-banner p {
            margin-left: 25%;
            color: #FFF;
            font-family: Roboto;
            font-size: 18px;
            font-style: normal;
            font-weight: 400;
            line-height: 23.76px;
            letter-spacing: -0.18px;
        }

        .popular-categories {
            margin-top: 30px;
            width: 100%;
            background-color: white;
        }

        .highlight{
            margin: 0 auto;
            width: 1200px;
            font-size: 25px;
            font-weight: bold;
            padding-left: 40px;
            margin-top: 30px;
            margin-bottom: 30px;
        }

        .categories-container{
            margin: 0 auto;
            width: 1200px;
            padding-left: 40px;
            position: relative;
        }

        .categories{
            display: flex;
            transition: transform 0.3s ease-in-out;
        }

        .categories-wrap{
           overflow: hidden;
        }

        .categories-img{
            width: 160px;
            height: 160px;
            background-color: #F2F3F6;
            border-radius: 50%;
            text-align: center;
            line-height: 160px;
            margin-bottom: 10px;
            box-shadow: inset 0 0 0 1px #0017580d;
        }

        .categories-img img{
            width: 80px;
            height: 80px;
            vertical-align: middle;
            transform: translateY(-3px);
        }

        .categories-text{
            text-align: center;
            font-weight:bold;
        }


        .popular-categories a {
            margin: 0 10px;
            font-size: 14px;
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }

        .categories-left{
            position: absolute;
            font-size: 30px;
            left:16px;
            top: 30%;
            font-weight: 400;
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 6px #00000029;
            text-align: center;
            line-height: 50px;
        }

        .categories-right{
            position: absolute;
            font-size: 30px;
            right: -24px;
            top: 30%;
            width: 50px;
            height: 50px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 6px #00000029;
            text-align: center;
            line-height: 50px;
        }

        .header-img{
            display: none;
            width: 100%;
            height: 100%;
            position: absolute;
            right: 0px;
            bottom: 0px;
            transition: opacity 0.2s , transform 0.5s;
        }

        .left-btn{
            position: absolute;
            font-size: 40px;
            top:45%;
            left: 10px;
            cursor: pointer;
        }

        .right-btn{
            position: absolute;
            font-size: 40px;
            top: 45%;
            right: 10px;
            cursor: pointer;
        }

        .header-content{
            display: flex;
            width: calc(100% * 5);
            transition: transform 0.5s ease-in-out;
        }


        .header-inner{
            flex: 0 0 100%;
            padding-left: 70px;
            height: 100%;
        }

        .header-inner h3{
            margin-top: 50px;
            margin-bottom: 20px;
            font-size: 40px;
            font-weight: bold;
        }

        .header-inner h4{
            font-size: 20px;
            font-weight: bold;
        }




    </style>
</head>
<body>
<header>
    <form action="#" method="post">
        <div th:replace="~{topnav.html}"></div>
        <div class="header-banner-wrap">
            <div class="header-banner">
                <span>
                    <img src="/uploads/sample_image01.png" alt="1" class="header-img" id="header-img0" style="display: block">
                </span>
                <span>
                    <img src="/uploads/sample_image02.png" alt="2" class="header-img" id="header-img1">
                </span>
                <span>
                    <img src="/uploads/sample_image03.png" alt="3" class="header-img" id="header-img2">
                </span>
                <span>
                    <img src="/uploads/sample_image04.png" alt="4" class="header-img" id="header-img3">
                </span>
                <span>
                    <img src="/uploads/sample_image05.png" alt="5" class="header-img" id="header-img4">
                </span>
                <div class="header-content">
                    <div class="header-inner">

                        <h3>
                            동네 이웃들이1<br>
                            자주 가는 동네 업체
                        </h3>
                        <h4>
                            우리 동네 사람들이1<br>
                            이용하는 업체를 찾아보세요.
                        </h4>
                    </div>
                    <div class="header-inner">

                        <h3>
                            동네 이웃들이2<br>
                            자주 가는 동네 업체
                        </h3>
                        <h4>
                            우리 동네 사람들이2<br>
                            이용하는 업체를 찾아보세요.
                        </h4>
                    </div>
                    <div class="header-inner">

                        <h3>
                            동네 이웃들이3<br>
                            자주 가는 동네 업체
                        </h3>
                        <h4>
                            우리 동네 사람들이3<br>
                            이용하는 업체를 찾아보세요.
                        </h4>
                    </div>
                    <div class="header-inner">

                        <h3>
                            동네 이웃들이4<br>
                            자주 가는 동네 업체
                        </h3>
                        <h4>
                            우리 동네 사람들이4<br>
                            이용하는 업체를 찾아보세요.
                        </h4>
                    </div>
                    <div class="header-inner">

                        <h3>
                            동네 이웃들이5<br>
                            자주 가는 동네 업체
                        </h3>
                        <h4>
                            우리 동네 사람들이5<br>
                            이용하는 업체를 찾아보세요.
                        </h4>
                    </div>
                </div>
                <div class="left-btn" onclick="prebtn()">
                    <i class="fa-solid fa-chevron-left"></i>
                </div>
                <div class="right-btn" onclick="nextbtn()">
                    <i class="fa-solid fa-chevron-right"></i>
                </div>
            </div>
        </div>
        <div class="popular-categories">
            <div class="highlight">인기 카테고리</div>
            <div class="categories-container">
                <div class="categories-wrap">
                    <div class="categories">
                        <a th:href="@{/post/main?tag=운동/스포츠}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_3.png" alt="">
                                </div>
                                <div class="categories-text">
                                    운동/스포츠
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=음악/악기}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_4.png" alt="">
                                </div>
                                <div class="categories-text">
                                    음악/악기
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=아웃도어/여행}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_5.png" alt="">
                                </div>
                                <div class="categories-text">
                                    아웃도어/여행
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=게임/오락}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_6.png" alt="">
                                </div>
                                <div class="categories-text">
                                    게임/오락
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=요리/제조}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_7.png" alt="">
                                </div>
                                <div class="categories-text">
                                    요리/제조
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=외국어/언어}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_8.png" alt="">
                                </div>
                                <div class="categories-text">
                                    외국어/언어
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=스포츠관람}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_9.png" alt="">
                                </div>
                                <div class="categories-text">
                                    스포츠관람
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=인문학/철학}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_10.png" alt="">
                                </div>
                                <div class="categories-text">
                                    인문학/철학
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=자기개발}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_11.png" alt="">
                                </div>
                                <div class="categories-text">
                                    자기개발
                                </div>
                            </article>
                        </a>
                        <a th:href="@{/post/main?tag=독서}">
                            <article>
                                <div class="categories-img">
                                    <img src="/uploads/img_12.png" alt="">
                                </div>
                                <div class="categories-text">
                                    독서
                                </div>
                            </article>
                        </a>
                    </div>
                    <div class="categories-left">
                        <i class="fa-solid fa-chevron-left"></i>
                    </div>
                    <div class="categories-right">
                        <i class="fa-solid fa-chevron-right"></i>
                    </div>
                </div>
            </div>
        </div>
    </form>
</header>

<div class="post-container">
    <div th:each="post, iterStat : ${posts}" class="post">
        <a th:href="@{|/post/detail${post.getPostId()}|}" class="post-detail">
            <img th:src="@{|/uploads/${post.photoUrl}|}" alt="" style="width: 250px; height: 250px;">
            <div class="post-title" th:text="${post.title}">제목</div>
            <div class="post-content" th:text="${post.content}">내용</div>
            <div class="post-info">활동 지역: <span th:text="${post.roadAddress}">지역</span></div>
            <div class="post-info">상세주소: <span th:text="${post.detailAddress}">상세주소</span></div>
            <div class="post-info">분야: <span th:text="${post.tag}">분야</span></div>
            <div class="post-info">조회수: <span th:text="${post.viewCount}">0</span></div>
            <div class="post-info">좋아요: <span th:text="${post.likeCount}">0</span></div>
            <div class="post-info">참여자: <span th:text="${post.nowParticipants}">0</span>/<span
                    th:text="${post.maxParticipants}">0</span></div>
            <div class="post-info"><span
                    th:if="${post.nowParticipants}==${post.maxParticipants}">상태: 모집완료</span>
            </div>
            <div class="post-info"><span th:if="${post.nowParticipants}!=${post.maxParticipants}">상태: 모집중</span>
            </div>
        </a>
    </div>
</div>

<script>
    const headerContent = document.querySelector('.header-content');
    const headerInners = document.querySelectorAll('.header-inner');
    const headerBannerWrap = document.querySelector('.header-banner-wrap');
    const headerImages = document.querySelectorAll('.header-img');

    let currentBannerIndex = 0;
    let currentImageIndex = 0;

    // 슬라이드 배경색 배열
    const backgroundColors = [
        "#FFF1AA",
        "#FFE2D2",
        "#FFE2D2",
        "#E3EFF9",
        "#DAF4FF"
    ];


    function prebtn() {

        currentBannerIndex = (currentBannerIndex - 1 + headerInners.length) % headerInners.length;

        headerContent.style.transform = `translateX(-${currentBannerIndex * 100}%)`;

        headerImages[currentImageIndex].style.transform = "translateX(-10px)";
        headerImages[currentImageIndex].style.opacity = "0";

        currentImageIndex = (currentImageIndex - 1  + headerImages.length) % headerImages.length;

        headerImages[currentImageIndex].style.transform = "translateX(10px)";
        headerImages[currentImageIndex].style.display = "block";
        headerImages[currentImageIndex].style.opacity = "1";


        headerBannerWrap.style.backgroundColor = backgroundColors[currentImageIndex];
    }


    function nextbtn() {

        currentBannerIndex = (currentBannerIndex + 1) % headerInners.length;

        headerContent.style.transform = `translateX(-${currentBannerIndex * 100}%)`;

        headerImages[currentImageIndex].style.transform = "translateX(10px)";
        headerImages[currentImageIndex].style.opacity = "0";

        currentImageIndex = (currentImageIndex + 1  + headerImages.length) % headerImages.length;

        headerImages[currentImageIndex].style.transform = "translateX(-10px)";
        headerImages[currentImageIndex].style.display = "block";
        headerImages[currentImageIndex].style.opacity = "1";


        headerBannerWrap.style.backgroundColor = backgroundColors[currentImageIndex];
    }

    const categoriesWrap = document.querySelector('.categories-wrap');
    const categories = document.querySelector('.categories');
    const categoriesLeft = document.querySelector('.categories-left');
    const categoriesRight = document.querySelector('.categories-right');

    let currentCategoriesOffset = 0;

    const containerWidth = categoriesWrap.offsetWidth;
    const categoriesWidth = categories.scrollWidth;
    const step = containerWidth / 2;


    categoriesWrap.addEventListener('mouseenter', () => {
        updateArrowVisibility();
    });
    categoriesWrap.addEventListener('mouseleave', () => {
        categoriesLeft.style.display = 'none';
        categoriesRight.style.display = 'none';
    });




    function updateArrowVisibility() {
        if (currentCategoriesOffset >= 0) {
            categoriesLeft.style.display = 'none';
        } else {
            categoriesLeft.style.display = 'block';
        }

        if (currentCategoriesOffset <= -(categoriesWidth - containerWidth)) {
            categoriesRight.style.display = 'none';
        } else {
            categoriesRight.style.display = 'block';
        }
    }

    categoriesLeft.addEventListener('click', () => {
        currentCategoriesOffset = Math.min(currentCategoriesOffset + step, 0);
        categories.style.transform = `translateX(${currentCategoriesOffset}px)`;
        updateArrowVisibility();
    });

    categoriesRight.addEventListener('click', () => {
        currentCategoriesOffset = Math.max(currentCategoriesOffset - step, -(categoriesWidth - containerWidth));
        categories.style.transform = `translateX(${currentCategoriesOffset}px)`;
        updateArrowVisibility();
    });


    updateArrowVisibility();


</script>
</body>
<!--header 부분 마지막-->

<!-- Main 부분 시작-->

<!-- Main 부분 끝-->

<!--footer 부분 시작-->
<body>
<div th:replace="~{footer.html}"></div>
</body>
<!--footer 부분 마지막-->
</html>
